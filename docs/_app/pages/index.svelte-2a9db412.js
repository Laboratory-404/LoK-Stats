var T=Object.defineProperty,E=Object.defineProperties;var $=Object.getOwnPropertyDescriptors;var O=Object.getOwnPropertySymbols;var v=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var b=(n,a,e)=>a in n?T(n,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[a]=e,y=(n,a)=>{for(var e in a||(a={}))v.call(a,e)&&b(n,e,a[e]);if(O)for(var e of O(a))I.call(a,e)&&b(n,e,a[e]);return n},w=(n,a)=>E(n,$(a));import{S as B,i as D,s as P,w as j,x as C,y as S,q as k,o as G,B as U,I as q,P as p,u as x}from"../chunks/vendor-145a5310.js";import{d as u}from"../chunks/stores-c4323b93.js";import{L as M}from"../chunks/Land-67eec38b.js";const W={MODE:"production",DEV:!1,PROD:!0,BASE_URL:"/_app/",API_ROOT:"https://api-lok-live.leagueofkingdoms.com/api"},Y=5e3,V=1,z=100,F=n=>new Promise(a=>setTimeout(()=>a(),n)),H=async(n,a={},e)=>{let t=null,o;if(typeof AbortController=="function"){const{timeout:r=Y}=a,g=new AbortController;t=setTimeout(()=>g.abort(),r),typeof e=="function"?o=await e(n,w(y({},a),{signal:g.signal})):o=await fetch(n,w(y({},a),{signal:g.signal}))}else typeof e=="function"?o=await e(n,a):o=await fetch(n,a);return t!==null&&clearTimeout(t),o},R=async(n,a={},e,t=V)=>{try{return await H(n,a,e)}catch(o){if(console.error(o),t===1)throw o;return await F(z),R(n,a,e,t-1)}},L=(n,a,e,t,o)=>R(`${W.API_ROOT}/stat/land/contribution?landId=${n}&from=${a}&to=${e}`,o,t);function J(n){let a,e;return a=new M({props:{id:N,data:n[1],val:n[0],max:n[2]}}),{c(){j(a.$$.fragment)},l(t){C(a.$$.fragment,t)},m(t,o){S(a,t,o),e=!0},p(t,[o]){const r={};o&2&&(r.data=t[1]),o&1&&(r.val=t[0]),a.$set(r)},i(t){e||(k(a.$$.fragment,t),e=!0)},o(t){G(a.$$.fragment,t),e=!1},d(t){U(a,t)}}}let i="2022-03-22",f="2022-03-28",K=134223,N=0;function Q(n,a,e){let t;q(n,u,l=>e(3,t=l));let o=[134223,134224,134225,133969,133968,133967,133711,133712,133713,133455,133456,133457,150949];if(Array.isArray(t.lands))if(t.lands.length===0)p(u,t.lands=[{start:i,end:f,data:{}}],t),t.lands.map((l,s)=>{l.start===i&&l.end===f&&o.map(async m=>{let c=await L(m,i,f).catch(_=>console.error(_)),d=await(c==null?void 0:c.json().catch(_=>console.error(_)));e(0,r++,r),typeof l.data=="undefined"&&p(u,t.lands[s].data={},t),p(u,t.lands[s].data[m]=d,t)})}),console.log("Loaded from server");else{let l=!1;t.lands.map(s=>{s.start===i&&s.end===f&&(l=!0)}),l?t.lands.map((s,m)=>{s.start===i&&s.end===f&&(s.data&&Object.keys(s.data).length===0?(o.map(async c=>{let d=await L(c,i,f).catch(h=>console.error(h)),_=await(d==null?void 0:d.json().catch(h=>console.error(h)));e(0,r++,r),typeof s.data=="undefined"&&p(u,t.lands[m].data={},t),p(u,t.lands[m].data[c]=_,t)}),console.log("Loaded from server")):console.log("Loaded from cache"))}):(t.lands.push({start:i,end:f,data:{}}),t.lands.map((s,m)=>{s.start===i&&s.end===f&&o.map(async c=>{let d=await L(c,i,f).catch(h=>console.error(h)),_=await(d==null?void 0:d.json().catch(h=>console.error(h)));typeof s.data=="undefined"&&p(u,t.lands[m].data={},t),p(u,t.lands[m].data[c]=_,t)})}),console.log("Loaded from server"))}let r=0,g=o.length,A;return x(()=>{var l,s;e(1,A=(s=(l=t==null?void 0:t.lands[0])==null?void 0:l.data[K])==null?void 0:s.contribution)}),[r,A,g]}class et extends B{constructor(a){super();D(this,a,Q,J,P,{})}}export{et as default};
//# sourceMappingURL=index.svelte-2a9db412.js.map
