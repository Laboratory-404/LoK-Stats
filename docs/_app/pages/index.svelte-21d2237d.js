var rt=Object.defineProperty,it=Object.defineProperties;var ft=Object.getOwnPropertyDescriptors;var J=Object.getOwnPropertySymbols;var dt=Object.prototype.hasOwnProperty,ct=Object.prototype.propertyIsEnumerable;var Z=(o,e,a)=>e in o?rt(o,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[e]=a,V=(o,e)=>{for(var a in e||(e={}))dt.call(e,a)&&Z(o,a,e[a]);if(J)for(var a of J(e))ct.call(e,a)&&Z(o,a,e[a]);return o},Q=(o,e)=>it(o,ft(e));import{S as ut,i as _t,s as mt,w as G,x as F,y as U,q as E,o as I,B as W,I as ht,P,Q as pt,R as $t,T as bt,e as y,c as k,a as v,d as h,g as R,k as A,m as D,n as nt,p as ot,l as M,b as Y,U as gt,G as wt,V as yt,W as kt,t as S,h as C,F as p,j as q,H as vt,f as K,X as Et,Y as Tt}from"../chunks/vendor-88f8caf4.js";import{d as B}from"../chunks/stores-d1a01a18.js";import{B as Rt}from"../chunks/Box-ce1f39c0.js";const At={MODE:"production",DEV:!1,PROD:!0,BASE_URL:"/_app/",API_ROOT:"https://api-lok-live.leagueofkingdoms.com/api"},Dt=5e3,It=1,Lt=100,Ot=o=>new Promise(e=>setTimeout(()=>e(),o)),Bt=async(o,e={},a)=>{let t=null,l;if(typeof AbortController=="function"){const{timeout:n=Dt}=e,r=new AbortController;t=setTimeout(()=>r.abort(),n),typeof a=="function"?l=await a(o,Q(V({},e),{signal:r.signal})):l=await fetch(o,Q(V({},e),{signal:r.signal}))}else typeof a=="function"?l=await a(o,e):l=await fetch(o,e);return t!==null&&clearTimeout(t),l},st=async(o,e={},a,t=It)=>{try{return await Bt(o,e,a)}catch(l){if(console.error(l),t===1)throw l;return await Ot(Lt),st(o,e,a,t-1)}},X=(o,e,a,t,l)=>st(`${At.API_ROOT}/stat/land/contribution?landId=${o}&from=${e}&to=${a}`,l,t);function x(o,e,a){const t=o.slice();return t[7]=e[a],t}function tt(o){let e,a;return e=new kt({props:{id:"my-table"}}),{c(){G(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,l){U(e,t,l),a=!0},i(t){a||(E(e.$$.fragment,t),a=!0)},o(t){I(e.$$.fragment,t),a=!1},d(t){W(e,t)}}}function et(o){let e,a=o[1],t=[];for(let l=0;l<a.length;l+=1)t[l]=at(x(o,a,l));return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=M()},l(l){for(let n=0;n<t.length;n+=1)t[n].l(l);e=M()},m(l,n){for(let r=0;r<t.length;r+=1)t[r].m(l,n);R(l,e,n)},p(l,n){if(n&2){a=l[1];let r;for(r=0;r<a.length;r+=1){const $=x(l,a,r);t[r]?t[r].p($,n):(t[r]=at($),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=a.length}},d(l){vt(t,l),l&&h(e)}}}function at(o){let e,a,t=o[7].name+"",l,n,r,$=o[7].continent+"",f,T,w,u=o[7].kingdomId+"",s,i,_,d=o[7].total+"",c,m;return{c(){e=y("tr"),a=y("td"),l=S(t),n=A(),r=y("td"),f=S($),T=A(),w=y("td"),s=S(u),i=A(),_=y("td"),c=S(d),m=A()},l(b){e=k(b,"TR",{});var g=v(e);a=k(g,"TD",{});var H=v(a);l=C(H,t),H.forEach(h),n=D(g),r=k(g,"TD",{});var j=v(r);f=C(j,$),j.forEach(h),T=D(g),w=k(g,"TD",{});var N=v(w);s=C(N,u),N.forEach(h),i=D(g),_=k(g,"TD",{});var z=v(_);c=C(z,d),z.forEach(h),m=D(g),g.forEach(h)},m(b,g){R(b,e,g),p(e,a),p(a,l),p(e,n),p(e,r),p(r,f),p(e,T),p(e,w),p(w,s),p(e,i),p(e,_),p(_,c),p(e,m)},p(b,g){g&2&&t!==(t=b[7].name+"")&&q(l,t),g&2&&$!==($=b[7].continent+"")&&q(f,$),g&2&&u!==(u=b[7].kingdomId+"")&&q(s,u),g&2&&d!==(d=b[7].total+"")&&q(c,d)},d(b){b&&h(e)}}}function St(o){let e,a,t,l,n,r,$,f,T,w,u,s,i,_,d=o[0]&&et(o);return{c(){e=y("thead"),a=y("th"),t=S("Name"),l=A(),n=y("th"),r=S("Continent"),$=A(),f=y("th"),T=S("Kingdom"),w=A(),u=y("th"),s=S("Total"),i=A(),_=y("tbody"),d&&d.c(),this.h()},l(c){e=k(c,"THEAD",{});var m=v(e);a=k(m,"TH",{"data-key":!0,style:!0});var b=v(a);t=C(b,"Name"),b.forEach(h),l=D(m),n=k(m,"TH",{"data-key":!0,style:!0});var g=v(n);r=C(g,"Continent"),g.forEach(h),$=D(m),f=k(m,"TH",{"data-key":!0,style:!0});var H=v(f);T=C(H,"Kingdom"),H.forEach(h),w=D(m),u=k(m,"TH",{"data-key":!0,style:!0});var j=v(u);s=C(j,"Total"),j.forEach(h),m.forEach(h),i=D(c),_=k(c,"TBODY",{});var N=v(_);d&&d.l(N),N.forEach(h),this.h()},h(){Y(a,"data-key","name"),K(a,"width","100px"),Y(n,"data-key","continent"),K(n,"width","100px"),Y(f,"data-key","kingdomId"),K(f,"width","100px"),Y(u,"data-key","total"),K(u,"width","100px")},m(c,m){R(c,e,m),p(e,a),p(a,t),p(e,l),p(e,n),p(n,r),p(e,$),p(e,f),p(f,T),p(e,w),p(e,u),p(u,s),R(c,i,m),R(c,_,m),d&&d.m(_,null)},p(c,m){c[0]?d?d.p(c,m):(d=et(c),d.c(),d.m(_,null)):d&&(d.d(1),d=null)},d(c){c&&h(e),c&&h(i),c&&h(_),d&&d.d()}}}function Ct(o){let e,a,t=o[1]&&lt();return{c(){e=y("aside"),t&&t.c()},l(l){e=k(l,"ASIDE",{});var n=v(e);t&&t.l(n),n.forEach(h)},m(l,n){R(l,e,n),t&&t.m(e,null),a=!0},p(l,n){l[1]?t?n&2&&E(t,1):(t=lt(),t.c(),E(t,1),t.m(e,null)):t&&(nt(),I(t,1,1,()=>{t=null}),ot())},i(l){a||(E(t),a=!0)},o(l){I(t),a=!1},d(l){l&&h(e),t&&t.d()}}}function lt(o){let e,a,t,l;return e=new Et({props:{id:"my-table"}}),t=new Tt({props:{id:"my-table"}}),{c(){G(e.$$.fragment),a=A(),G(t.$$.fragment)},l(n){F(e.$$.fragment,n),a=D(n),F(t.$$.fragment,n)},m(n,r){U(e,n,r),R(n,a,r),U(t,n,r),l=!0},i(n){l||(E(e.$$.fragment,n),E(t.$$.fragment,n),l=!0)},o(n){I(e.$$.fragment,n),I(t.$$.fragment,n),l=!1},d(n){W(e,n),n&&h(a),W(t,n)}}}function Pt(o){let e,a,t,l,n,r,$,f=o[1]&&tt();function T(s){o[4](s)}let w={settings:o[2],data:o[3],id:"my-table",$$slots:{default:[St]},$$scope:{ctx:o}};o[0]!==void 0&&(w.dataRows=o[0]),t=new pt({props:w}),$t.push(()=>bt(t,"dataRows",T));let u=o[2].pagination&&Ct(o);return{c(){e=y("aside"),f&&f.c(),a=A(),G(t.$$.fragment),n=A(),u&&u.c(),r=M(),this.h()},l(s){e=k(s,"ASIDE",{class:!0});var i=v(e);f&&f.l(i),i.forEach(h),a=D(s),F(t.$$.fragment,s),n=D(s),u&&u.l(s),r=M(),this.h()},h(){Y(e,"class","search")},m(s,i){R(s,e,i),f&&f.m(e,null),R(s,a,i),U(t,s,i),R(s,n,i),u&&u.m(s,i),R(s,r,i),$=!0},p(s,i){s[1]?f?i&2&&E(f,1):(f=tt(),f.c(),E(f,1),f.m(e,null)):f&&(nt(),I(f,1,1,()=>{f=null}),ot());const _={};i&1027&&(_.$$scope={dirty:i,ctx:s}),!l&&i&1&&(l=!0,_.dataRows=s[0],gt(()=>l=!1)),t.$set(_),s[2].pagination&&u.p(s,i)},i(s){$||(E(f),E(t.$$.fragment,s),E(u),$=!0)},o(s){I(f),I(t.$$.fragment,s),I(u),$=!1},d(s){s&&h(e),f&&f.d(),s&&h(a),W(t,s),s&&h(n),u&&u.d(s),s&&h(r)}}}function Ht(o){let e,a;return e=new Rt({props:{style:"height: 80vh; padding: 10px;",$$slots:{default:[Pt]},$$scope:{ctx:o}}}),{c(){G(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,l){U(e,t,l),a=!0},p(t,[l]){const n={};l&1027&&(n.$$scope={dirty:l,ctx:t}),e.$set(n)},i(t){a||(E(e.$$.fragment,t),a=!0)},o(t){I(e.$$.fragment,t),a=!1},d(t){W(e,t)}}}let L="2022-03-22",O="2022-03-28",jt=133455;function Nt(o,e,a){let t,l,n=wt,r=()=>(n(),n=yt(w,s=>a(1,l=s)),w);ht(o,B,s=>a(5,t=s)),o.$$.on_destroy.push(()=>n());let $=[134223,134224,134225,133969,133968,133967,133711,133712,133713,133455,133456,133457,150949];if(Array.isArray(t.lands))if(t.lands.length===0)P(B,t.lands=[{start:L,end:O,data:{}}],t),t.lands.map((s,i)=>{s.start===L&&s.end===O&&$.map(async _=>{let d=await X(_,L,O).catch(m=>console.error(m)),c=await(d==null?void 0:d.json().catch(m=>console.error(m)));typeof s.data=="undefined"&&P(B,t.lands[i].data={},t),P(B,t.lands[i].data[_]=c,t)})}),console.log("Loaded from server");else{let s=!1;t.lands.map(i=>{i.start===L&&i.end===O&&(s=!0)}),s?t.lands.map((i,_)=>{i.start===L&&i.end===O&&(i.data&&Object.keys(i.data).length===0?($.map(async d=>{let c=await X(d,L,O).catch(b=>console.error(b)),m=await(c==null?void 0:c.json().catch(b=>console.error(b)));typeof i.data=="undefined"&&P(B,t.lands[_].data={},t),P(B,t.lands[_].data[d]=m,t)}),console.log("Loaded from server")):console.log("Loaded from cache"))}):(t.lands.push({start:L,end:O,data:{}}),t.lands.map((i,_)=>{i.start===L&&i.end===O&&$.map(async d=>{let c=await X(d,L,O).catch(b=>console.error(b)),m=await(c==null?void 0:c.json().catch(b=>console.error(b)));typeof i.data=="undefined"&&P(B,t.lands[_].data={},t),P(B,t.lands[_].data[d]=m,t)})}),console.log("Loaded from server"))}const f={sortable:!0,pagination:!1,scrollY:!0,columnFilter:!1,css:!0,labels:{search:"Search...",filter:"Filter",noRows:"No entries to found",info:"Showing {start} to {end} of {rows} entries",previous:"Previous",next:"Next"},blocks:{searchInput:!1,paginationButtons:!1,paginationRowCount:!1}};let T=t==null?void 0:t.lands[0].data[jt].contribution,w;function u(s){w=s,r(a(0,w))}return[w,l,f,T,u]}class Wt extends ut{constructor(e){super();_t(this,e,Nt,Ht,mt,{})}}export{Wt as default};
