var he=Object.defineProperty,pe=Object.defineProperties;var ge=Object.getOwnPropertyDescriptors;var Z=Object.getOwnPropertySymbols;var be=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable;var x=(n,t,a)=>t in n?he(n,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[t]=a,M=(n,t)=>{for(var a in t||(t={}))be.call(t,a)&&x(n,a,t[a]);if(Z)for(var a of Z(t))we.call(t,a)&&x(n,a,t[a]);return n},U=(n,t)=>pe(n,ge(t));import{D as $e,S as fe,i as de,s as ce,K as ve,C as Q,e as y,c as E,a as k,d as g,O as ee,g as L,P as ye,L as Ee,M as ke,N as Te,z as Le,q as T,o as R,Q as te,R as Re,w as F,x as Y,y as G,B as K,T as Oe,U as N,V as De,W as Ae,X as Ie,k as O,m as D,n as ue,p as _e,l as q,b as j,Y as Se,H as Ve,Z as Be,_ as Ne,t as V,h as B,G as b,j as W,$ as Pe,f as z,a0 as Ce,a1 as He}from"../chunks/vendor-726a7d34.js";const ae=[],je=n=>{var a;const t=typeof process!="undefined"&&((a=process.env)==null?void 0:a.NODE_ENV)==="production";if(ae.indexOf(n)===-1&&!t){let e=`Unable to find the ${n}. No data will be persisted.`;typeof window=="undefined"&&(e+=`
Are you running on a server? Most of storages are not available while running on a server.`),console.warn(e),ae.push(n)}},Fe=n=>JSON.stringify(n),ne=n=>{if(n!=="undefined"){if(n!=null)try{return JSON.parse(n)}catch{}return n}};function Ye(n,t,a){const e=t.getValue(a);return e!==null&&n.set(e),t.addListener&&t.addListener(a,l=>{n.set(l)}),n.subscribe(l=>{t.setValue(a,l)}),U(M({},n),{delete(){t.deleteValue(a)}})}function Ge(n,t=!1){const a=[],e=o=>{const i=o.key;o.storageArea===n&&a.filter(({key:f})=>f===i).forEach(({listener:f})=>{f(ne(o.newValue))})},l=()=>{t&&typeof window!="undefined"&&(window==null?void 0:window.addEventListener)&&window.addEventListener("storage",e)},s=()=>{t&&typeof window!="undefined"&&(window==null?void 0:window.removeEventListener)&&window.removeEventListener("storage",e)};return{addListener(o,i){a.push({key:o,listener:i}),a.length===1&&l()},removeListener(o,i){const f=a.indexOf({key:o,listener:i});f!==-1&&a.splice(f,1),a.length===0&&s()},getValue(o){const i=n.getItem(o);return ne(i)},deleteValue(o){n.removeItem(o)},setValue(o,i){n.setItem(o,Fe(i))}}}function Ke(n=!1){return typeof window!="undefined"&&(window==null?void 0:window.localStorage)?Ge(window.localStorage,n):(je("window.localStorage"),Me())}function Me(){return{getValue(){return null},deleteValue(){},setValue(){}}}const S=Ye($e({lands:[]}),Ke(),"db"),Ue={MODE:"production",DEV:!1,PROD:!0,BASE_URL:"/_app/",API_ROOT:"https://api-lok-live.leagueofkingdoms.com/api"},We=5e3,ze=1,qe=100,Je=n=>new Promise(t=>setTimeout(()=>t(),n)),Qe=async(n,t={},a)=>{let e=null,l;if(typeof AbortController=="function"){const{timeout:s=We}=t,o=new AbortController;e=setTimeout(()=>o.abort(),s),typeof a=="function"?l=await a(n,U(M({},t),{signal:o.signal})):l=await fetch(n,U(M({},t),{signal:o.signal}))}else typeof a=="function"?l=await a(n,t):l=await fetch(n,t);return e!==null&&clearTimeout(e),l},me=async(n,t={},a,e=ze)=>{try{return await Qe(n,t,a)}catch(l){if(console.error(l),e===1)throw l;return await Je(qe),me(n,t,a,e-1)}},J=(n,t,a,e,l)=>me(`${Ue.API_ROOT}/stat/land/contribution?landId=${n}&from=${t}&to=${a}`,l,e);function Xe(n){let t,a,e,l,s;const o=n[3].default,i=ve(o,n,n[2],null);let f=[{class:a="box "+(n[0]?"aside":"")},n[1]],v={};for(let d=0;d<f.length;d+=1)v=Q(v,f[d]);return{c(){t=y("div"),i&&i.c(),this.h()},l(d){t=E(d,"DIV",{class:!0});var u=k(t);i&&i.l(u),u.forEach(g),this.h()},h(){ee(t,v)},m(d,u){L(d,t,u),i&&i.m(t,null),e=!0,l||(s=ye(t,"click",n[4]),l=!0)},p(d,[u]){i&&i.p&&(!e||u&4)&&Ee(i,o,d,d[2],e?Te(o,d[2],u,null):ke(d[2]),null),ee(t,v=Le(f,[(!e||u&1&&a!==(a="box "+(d[0]?"aside":"")))&&{class:a},u&2&&d[1]]))},i(d){e||(T(i,d),e=!0)},o(d){R(i,d),e=!1},d(d){d&&g(t),i&&i.d(d),l=!1,s()}}}function Ze(n,t,a){let{$$slots:e={},$$scope:l}=t,{aside:s}=t;function o(i){Re.call(this,n,i)}return n.$$set=i=>{a(1,t=Q(Q({},t),te(i))),"aside"in i&&a(0,s=i.aside),"$$scope"in i&&a(2,l=i.$$scope)},t=te(t),[s,t,l,e,o]}class xe extends fe{constructor(t){super();de(this,t,Ze,Xe,ce,{aside:0})}}function le(n,t,a){const e=n.slice();return e[7]=t[a],e}function se(n){let t,a;return t=new Ne({props:{id:"my-table"}}),{c(){F(t.$$.fragment)},l(e){Y(t.$$.fragment,e)},m(e,l){G(t,e,l),a=!0},i(e){a||(T(t.$$.fragment,e),a=!0)},o(e){R(t.$$.fragment,e),a=!1},d(e){K(t,e)}}}function oe(n){let t,a=n[1],e=[];for(let l=0;l<a.length;l+=1)e[l]=ie(le(n,a,l));return{c(){for(let l=0;l<e.length;l+=1)e[l].c();t=q()},l(l){for(let s=0;s<e.length;s+=1)e[s].l(l);t=q()},m(l,s){for(let o=0;o<e.length;o+=1)e[o].m(l,s);L(l,t,s)},p(l,s){if(s&2){a=l[1];let o;for(o=0;o<a.length;o+=1){const i=le(l,a,o);e[o]?e[o].p(i,s):(e[o]=ie(i),e[o].c(),e[o].m(t.parentNode,t))}for(;o<e.length;o+=1)e[o].d(1);e.length=a.length}},d(l){Pe(e,l),l&&g(t)}}}function ie(n){let t,a,e=n[7].name+"",l,s,o,i=n[7].continent+"",f,v,d,u=n[7].kingdomId+"",r,c,h,_=n[7].total+"",m,p;return{c(){t=y("tr"),a=y("td"),l=V(e),s=O(),o=y("td"),f=V(i),v=O(),d=y("td"),r=V(u),c=O(),h=y("td"),m=V(_),p=O()},l(w){t=E(w,"TR",{});var $=k(t);a=E($,"TD",{});var P=k(a);l=B(P,e),P.forEach(g),s=D($),o=E($,"TD",{});var C=k(o);f=B(C,i),C.forEach(g),v=D($),d=E($,"TD",{});var H=k(d);r=B(H,u),H.forEach(g),c=D($),h=E($,"TD",{});var X=k(h);m=B(X,_),X.forEach(g),p=D($),$.forEach(g)},m(w,$){L(w,t,$),b(t,a),b(a,l),b(t,s),b(t,o),b(o,f),b(t,v),b(t,d),b(d,r),b(t,c),b(t,h),b(h,m),b(t,p)},p(w,$){$&2&&e!==(e=w[7].name+"")&&W(l,e),$&2&&i!==(i=w[7].continent+"")&&W(f,i),$&2&&u!==(u=w[7].kingdomId+"")&&W(r,u),$&2&&_!==(_=w[7].total+"")&&W(m,_)},d(w){w&&g(t)}}}function et(n){let t,a,e,l,s,o,i,f,v,d,u,r,c,h,_=n[0]&&oe(n);return{c(){t=y("thead"),a=y("th"),e=V("Name"),l=O(),s=y("th"),o=V("Continent"),i=O(),f=y("th"),v=V("Kingdom"),d=O(),u=y("th"),r=V("Total"),c=O(),h=y("tbody"),_&&_.c(),this.h()},l(m){t=E(m,"THEAD",{});var p=k(t);a=E(p,"TH",{"data-key":!0,style:!0});var w=k(a);e=B(w,"Name"),w.forEach(g),l=D(p),s=E(p,"TH",{"data-key":!0,style:!0});var $=k(s);o=B($,"Continent"),$.forEach(g),i=D(p),f=E(p,"TH",{"data-key":!0,style:!0});var P=k(f);v=B(P,"Kingdom"),P.forEach(g),d=D(p),u=E(p,"TH",{"data-key":!0,style:!0});var C=k(u);r=B(C,"Total"),C.forEach(g),p.forEach(g),c=D(m),h=E(m,"TBODY",{});var H=k(h);_&&_.l(H),H.forEach(g),this.h()},h(){j(a,"data-key","name"),z(a,"width","25%"),j(s,"data-key","continent"),z(s,"width","25%"),j(f,"data-key","kingdomId"),z(f,"width","25%"),j(u,"data-key","total"),z(u,"width","25%")},m(m,p){L(m,t,p),b(t,a),b(a,e),b(t,l),b(t,s),b(s,o),b(t,i),b(t,f),b(f,v),b(t,d),b(t,u),b(u,r),L(m,c,p),L(m,h,p),_&&_.m(h,null)},p(m,p){m[0]?_?_.p(m,p):(_=oe(m),_.c(),_.m(h,null)):_&&(_.d(1),_=null)},d(m){m&&g(t),m&&g(c),m&&g(h),_&&_.d()}}}function tt(n){let t,a,e=n[1]&&re();return{c(){t=y("aside"),e&&e.c()},l(l){t=E(l,"ASIDE",{});var s=k(t);e&&e.l(s),s.forEach(g)},m(l,s){L(l,t,s),e&&e.m(t,null),a=!0},p(l,s){l[1]?e?s&2&&T(e,1):(e=re(),e.c(),T(e,1),e.m(t,null)):e&&(ue(),R(e,1,1,()=>{e=null}),_e())},i(l){a||(T(e),a=!0)},o(l){R(e),a=!1},d(l){l&&g(t),e&&e.d()}}}function re(n){let t,a,e,l;return t=new Ce({props:{id:"my-table"}}),e=new He({props:{id:"my-table"}}),{c(){F(t.$$.fragment),a=O(),F(e.$$.fragment)},l(s){Y(t.$$.fragment,s),a=D(s),Y(e.$$.fragment,s)},m(s,o){G(t,s,o),L(s,a,o),G(e,s,o),l=!0},i(s){l||(T(t.$$.fragment,s),T(e.$$.fragment,s),l=!0)},o(s){R(t.$$.fragment,s),R(e.$$.fragment,s),l=!1},d(s){K(t,s),s&&g(a),K(e,s)}}}function at(n){let t,a,e,l,s,o,i,f=n[1]&&se();function v(r){n[4](r)}let d={settings:n[2],data:n[3],id:"my-table",$$slots:{default:[et]},$$scope:{ctx:n}};n[0]!==void 0&&(d.dataRows=n[0]),e=new De({props:d}),Ae.push(()=>Ie(e,"dataRows",v));let u=n[2].pagination&&tt(n);return{c(){t=y("aside"),f&&f.c(),a=O(),F(e.$$.fragment),s=O(),u&&u.c(),o=q(),this.h()},l(r){t=E(r,"ASIDE",{class:!0});var c=k(t);f&&f.l(c),c.forEach(g),a=D(r),Y(e.$$.fragment,r),s=D(r),u&&u.l(r),o=q(),this.h()},h(){j(t,"class","search")},m(r,c){L(r,t,c),f&&f.m(t,null),L(r,a,c),G(e,r,c),L(r,s,c),u&&u.m(r,c),L(r,o,c),i=!0},p(r,c){r[1]?f?c&2&&T(f,1):(f=se(),f.c(),T(f,1),f.m(t,null)):f&&(ue(),R(f,1,1,()=>{f=null}),_e());const h={};c&1027&&(h.$$scope={dirty:c,ctx:r}),!l&&c&1&&(l=!0,h.dataRows=r[0],Se(()=>l=!1)),e.$set(h),r[2].pagination&&u.p(r,c)},i(r){i||(T(f),T(e.$$.fragment,r),T(u),i=!0)},o(r){R(f),R(e.$$.fragment,r),R(u),i=!1},d(r){r&&g(t),f&&f.d(),r&&g(a),K(e,r),r&&g(s),u&&u.d(r),r&&g(o)}}}function nt(n){let t,a;return t=new xe({props:{style:"height: 80vh; padding: 10px;",$$slots:{default:[at]},$$scope:{ctx:n}}}),{c(){F(t.$$.fragment)},l(e){Y(t.$$.fragment,e)},m(e,l){G(t,e,l),a=!0},p(e,[l]){const s={};l&1027&&(s.$$scope={dirty:l,ctx:e}),t.$set(s)},i(e){a||(T(t.$$.fragment,e),a=!0)},o(e){R(t.$$.fragment,e),a=!1},d(e){K(t,e)}}}let A="2022-03-22",I="2022-03-28",lt=133455;function st(n,t,a){let e,l,s=Ve,o=()=>(s(),s=Be(d,r=>a(1,l=r)),d);Oe(n,S,r=>a(5,e=r)),n.$$.on_destroy.push(()=>s());let i=[134223,134224,134225,133969,133968,133967,133711,133712,133713,133455,133456,133457,150949];if(Array.isArray(e.lands))if(e.lands.length===0)N(S,e.lands=[{start:A,end:I,data:{}}],e),e.lands.map((r,c)=>{r.start===A&&r.end===I&&i.map(async h=>{let _=await J(h,A,I).catch(p=>console.error(p)),m=await(_==null?void 0:_.json().catch(p=>console.error(p)));typeof r.data=="undefined"&&N(S,e.lands[c].data={},e),N(S,e.lands[c].data[h]=m,e)})}),console.log("Loaded from server");else{let r=!1;e.lands.map(c=>{c.start===A&&c.end===I&&(r=!0)}),r?e.lands.map((c,h)=>{c.start===A&&c.end===I&&(c.data&&Object.keys(c.data).length===0?(i.map(async _=>{let m=await J(_,A,I).catch(w=>console.error(w)),p=await(m==null?void 0:m.json().catch(w=>console.error(w)));typeof c.data=="undefined"&&N(S,e.lands[h].data={},e),N(S,e.lands[h].data[_]=p,e)}),console.log("Loaded from server")):console.log("Loaded from cache"))}):(e.lands.push({start:A,end:I,data:{}}),e.lands.map((c,h)=>{c.start===A&&c.end===I&&i.map(async _=>{let m=await J(_,A,I).catch(w=>console.error(w)),p=await(m==null?void 0:m.json().catch(w=>console.error(w)));typeof c.data=="undefined"&&N(S,e.lands[h].data={},e),N(S,e.lands[h].data[_]=p,e)})}),console.log("Loaded from server"))}const f={sortable:!0,pagination:!1,scrollY:!0,columnFilter:!1,css:!0,labels:{search:"Search...",filter:"Filter",noRows:"No entries to found",info:"Showing {start} to {end} of {rows} entries",previous:"Previous",next:"Next"},blocks:{searchInput:!1,paginationButtons:!1,paginationRowCount:!1}};let v=e.lands[0].data[lt].contribution,d;function u(r){d=r,o(a(0,d))}return[d,l,f,v,u]}class rt extends fe{constructor(t){super();de(this,t,st,nt,ce,{})}}export{rt as default};
