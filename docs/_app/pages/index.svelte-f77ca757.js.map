{"version":3,"file":"index.svelte-f77ca757.js","sources":["../../../../../src/routes/index.svelte"],"sourcesContent":["<!--suppress JSUnresolvedVariable -->\n\n<script>\n\timport { afterUpdate } from 'svelte'\n\timport { db } from '$lib/stores'\n\timport { getContributions } from '$lib/api'\n\timport Land from '$lib/components/Land.svelte'\n\n\t// noinspection JSUnusedGlobalSymbols\n\tlet owner = '0xB00Fc62B8B22243779A35effb8B98f18193daa09'\n\t// noinspection JSUnusedLocalSymbols\n\tlet lands = [134223, 134224, 134225, 133969, 133968, 133967, 133711, 133712, 133713, 133455, 133456, 133457, 150949]\n\tlet start = '2022-03-22'\n\tlet end = '2022-03-28'\n\n\t$: land = 134223\n\n\tlet id = 0\n\tlet val = 0\n\tlet max = lands.length\n\tlet data\n\tlet rows\n\n\tif (Array.isArray($db.lands))  {\n\t\tif ($db.lands.length === 0) {\n\t\t\t$db.lands = [{\n\t\t\t\tstart,\n\t\t\t\tend,\n\t\t\t\tdata: {}\n\t\t\t}]\n\n\t\t\t$db.lands.map((p, i) => {\n\t\t\t\tif (p.start === start && p.end === end) {\n\t\t\t\t\tlands.map(async land => {\n\t\t\t\t\t\tlet contributions_api = await getContributions(land, start, end).catch(error => console.error(error))\n\t\t\t\t\t\t// noinspection UnnecessaryLocalVariableJS\n\t\t\t\t\t\tlet contributions_data = await contributions_api?.json().catch(error => console.error(error))\n\n\t\t\t\t\t\tval++\n\n\t\t\t\t\t\tif (typeof p.data === 'undefined') {\n\t\t\t\t\t\t\t$db.lands[i].data = {}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t$db.lands[i].data[land] = contributions_data\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tconsole.log('Loaded from server')\n\t\t} else {\n\t\t\tlet found = false\n\n\t\t\t$db.lands.map(p => {\n\t\t\t\tif (p.start === start && p.end === end) {\n\t\t\t\t\tfound = true\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tif (found) {\n\t\t\t\t$db.lands.map((p, i) => {\n\t\t\t\t\tif (p.start === start && p.end === end) {\n\t\t\t\t\t\tif (p.data && Object.keys(p.data).length === 0) {\n\t\t\t\t\t\t\tlands.map(async land => {\n\t\t\t\t\t\t\t\tlet contributions_api = await getContributions(land, start, end).catch(error => console.error(error))\n\t\t\t\t\t\t\t\t// noinspection UnnecessaryLocalVariableJS\n\t\t\t\t\t\t\t\tlet contributions_data = await contributions_api?.json().catch(error => console.error(error))\n\n\t\t\t\t\t\t\t\tval++\n\n\t\t\t\t\t\t\t\tif (typeof p.data === 'undefined') {\n\t\t\t\t\t\t\t\t\t$db.lands[i].data = {}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t$db.lands[i].data[land] = contributions_data\n\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\tconsole.log('Loaded from server')\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.log('Loaded from cache')\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\t\t\tval = max\n\t\t\t} else {\n\t\t\t\t$db.lands.push({\n\t\t\t\t\tstart,\n\t\t\t\t\tend,\n\t\t\t\t\tdata: {}\n\t\t\t\t})\n\n\t\t\t\t$db.lands.map((p, i) => {\n\t\t\t\t\tif (p.start === start && p.end === end) {\n\t\t\t\t\t\tlands.map(async land => {\n\t\t\t\t\t\t\tlet contributions_api = await getContributions(land, start, end).catch(error => console.error(error))\n\t\t\t\t\t\t\t// noinspection UnnecessaryLocalVariableJS\n\t\t\t\t\t\t\tlet contributions_data = await contributions_api?.json().catch(error => console.error(error))\n\n\t\t\t\t\t\t\tif (typeof p.data === 'undefined') {\n\t\t\t\t\t\t\t\t$db.lands[i].data = {}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t$db.lands[i].data[land] = contributions_data\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\t\t\tval = max\n\n\t\t\t\tconsole.log('Loaded from server')\n\t\t\t}\n\t\t}\n\t}\n\n\tafterUpdate(() => {\n\t\tdata = $db?.lands[0]?.data[land]?.contribution\n\t})\n</script>\n\n<Land {id} {data} {val} {max} />"],"names":[],"mappings":"khBAYK,GAAQ,aACR,EAAM,aAIN,EAAK,kDANL,IAAS,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,QAOzG,EAAM,EACN,EAAM,EAAM,OACZ,KAGA,MAAM,QAAQ,EAAI,UACjB,EAAI,MAAM,SAAW,MACxB,EAAI,QACH,QACA,MACA,aAGD,EAAI,MAAM,KAAK,EAAG,KACb,EAAE,QAAU,GAAS,EAAE,MAAQ,GAClC,EAAM,SAAU,QACX,QAA0B,GAAiB,EAAM,EAAO,GAAK,MAAM,GAAS,QAAQ,MAAM,IAE1F,OAA2B,kBAAmB,OAAO,MAAM,GAAS,QAAQ,MAAM,SAEtF,aAEW,GAAE,MAAS,iBACrB,EAAI,MAAM,GAAG,eAGd,EAAI,MAAM,GAAG,KAAK,GAAQ,SAK7B,QAAQ,IAAI,8BAER,GAAQ,GAEZ,EAAI,MAAM,IAAI,IACT,EAAE,QAAU,GAAS,EAAE,MAAQ,GAClC,GAAQ,MAIN,EACH,GAAI,MAAM,KAAK,EAAG,KACb,EAAE,QAAU,GAAS,EAAE,MAAQ,IAC9B,EAAE,MAAQ,OAAO,KAAK,EAAE,MAAM,SAAW,EAC5C,GAAM,SAAU,QACX,QAA0B,GAAiB,EAAM,EAAO,GAAK,MAAM,GAAS,QAAQ,MAAM,IAE1F,OAA2B,kBAAmB,OAAO,MAAM,GAAS,QAAQ,MAAM,SAEtF,aAEW,GAAE,MAAS,iBACrB,EAAI,MAAM,GAAG,eAGd,EAAI,MAAM,GAAG,KAAK,GAAQ,OAG3B,QAAQ,IAAI,uBAEZ,QAAQ,IAAI,wBAKf,EAAM,GAEN,GAAI,MAAM,MACT,QACA,MACA,UAGD,EAAI,MAAM,KAAK,EAAG,KACb,EAAE,QAAU,GAAS,EAAE,MAAQ,GAClC,EAAM,SAAU,QACX,QAA0B,GAAiB,EAAM,EAAO,GAAK,MAAM,GAAS,QAAQ,MAAM,IAE1F,OAA2B,kBAAmB,OAAO,MAAM,GAAS,QAAQ,MAAM,WAE3E,GAAE,MAAS,iBACrB,EAAI,MAAM,GAAG,eAGd,EAAI,MAAM,GAAG,KAAK,GAAQ,SAK7B,EAAM,EAEN,QAAQ,IAAI,uBAKf,0BACC,EAAO,uBAAK,MAAM,KAAX,cAAe,KAAK,KAApB,cAA2B,gBArGhC,EAAO"}